<div class="container">
  <div class="row">
    <div class="col-md-8">
      <h2>My Cars</h2>
      <p class="intro" style="margin-left: 0; margin-right: 0">Find the parts you need quickly and easily by adding your cars here. We will notify you when new parts applicable to your project are uploaded.</p>
    </div>
    <div class="col-md-4">
      <%= link_to 'New Car', new_customer_car_path, class: "btn btn-info", style: "margin-top: 26px" %>
    </div>

    <div id="content" class="col-md-12" style="margin-top: 25px">
      <%= flash_alert(flash) %>
    </div>

    <div class="col-md-12">
      <table class="table table-striped" data-toggle="table">
        <thead>
          <tr>
            <th>Image</th>
            <th><%= sort_link(@search, :name, 'Car Name', default_order: :desc) %></th>
            <th>Description</th>
            <th><%= sort_link(@search, :make_id, 'Make', default_order: :desc) %></th>
            <th><%= sort_link(@search, :model_id, 'Model', default_order: :desc) %></th>
            <th><%= sort_link(@search, :year, 'Year', default_order: :desc) %></th>
            <th colspan="3">Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @customer_cars.each do |car| %>
            <tr>
              <td><%= car.attachment.exists? ? (image_tag car.thumb_image_path, width: 100) : "No Image" %></td>
              <td><%= car.name %></td>
              <td><%= car.description %></td>
              <td><%= car.make ? car.make.name : "" %></td>
              <td><%= car.model ? car.model.name : "" %></td>
              <td><%= car.year %></td>
              <td><%= link_to 'Find Parts', spree.products_path(:search => {:product_applications_application_make_id_eq => (car.make ? car.make.id : ""), :product_applications_application_model_id_eq => (car.model ? car.model.id : ""), :year_range_any=> (car.year)}), :class => "btn btn-primary" %></td>
              <td><%= link_to 'Edit', edit_customer_car_path(car) %></td>
              <td><%= link_to 'Remove', customer_car_path(car), method: :delete, data: { confirm: 'Are you sure?' } %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
